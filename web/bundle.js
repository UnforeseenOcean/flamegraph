(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var detectInputType=require("./lib/detect-inputtype"),stackCollapse=require("./lib/stackcollapse"),svg=require("./lib/svg"),defaultOpts=require("./lib/default-opts"),defaultOptsMeta=require("./lib/default-opts-meta"),filterInternals=require("./lib/filter-internals"),filterLazy=require("./lib/filter-lazycompile");exports=module.exports=function flamegraph(arr,opts){if(!Array.isArray(arr))throw new TypeError("First arg needs to be an array of lines.");opts=opts||{};var collapsed=stackCollapseFromArray(arr,opts.inputtype);collapsed=filterLazy(collapsed,opts);if(!opts.internals)collapsed=filterInternals(collapsed,opts);return svg(collapsed,opts)};var stackCollapseFromArray=exports.stackCollapseFromArray=function stackCollpaseFromArray(arr,inputType){if(!Array.isArray(arr))throw new TypeError("First arg needs to be an array of lines.");inputType=inputType||detectInputType(arr);if(!inputType)throw new Error("No input type given and unable to detect it for the given input!");return stackCollapse(inputType,arr)};exports.stackCollapse=stackCollapse;exports.svg=svg;exports.defaultOpts=defaultOpts;exports.defaultOptsMeta=defaultOptsMeta},{"./lib/default-opts":7,"./lib/default-opts-meta":6,"./lib/detect-inputtype":8,"./lib/filter-internals":9,"./lib/filter-lazycompile":10,"./lib/stackcollapse":11,"./lib/svg":15}],2:[function(require,module,exports){"use strict";var regexp=/(\d+)\.\d+ms[^,]+,\d+,\s+,(\s*)(.+)/;function addFrame(f){return f+";"}function InstrumentsCollapser(){if(!(this instanceof InstrumentsCollapser))return new InstrumentsCollapser;this.stack=[];this.collapsed=[]}module.exports=InstrumentsCollapser;var proto=InstrumentsCollapser.prototype;proto.collapseLine=function collapseLine(line){var matches=line.match(regexp);if(!matches||!matches.length)return;var ms=matches[1];var depth=matches[2].length;var fn=matches[3];this.stack[depth]=fn;var res="";for(var i=0;i<depth;i++)res+=addFrame(this.stack[i]);res+=fn+" "+ms+"\n";this.collapsed.push(res.trim("\n"))};proto.collapsedLines=function(){return this.collapsed}},{}],3:[function(require,module,exports){"use strict";var format=require("util").format;var includePname=true;function inspect(obj,depth){console.error(require("util").inspect(obj,false,depth||5,true))}function PerfCollapser(opts){if(!(this instanceof PerfCollapser))return new PerfCollapser(opts);opts=opts||{};this.includePname=typeof opts.includePname==="undefined"?true:opts.includePname;this.stack=undefined;this.pname=undefined;this.collapsed={}}module.exports=PerfCollapser;var proto=PerfCollapser.prototype;proto.rememberStack=function rememberStack(joinedStack,count){if(!this.collapsed[joinedStack])this.collapsed[joinedStack]=0;this.collapsed[joinedStack]+=count};proto.unshiftStack=function unshiftStack(val){if(!this.stack)this.stack=[val];else this.stack.unshift(val)};proto.collapseLine=function perfCollapseLine(line){var func,mod;if(/^#/.test(line))return;if(!line.length){if(this.pname)this.unshiftStack(this.pname);if(this.stack)this.rememberStack(this.stack.join(";"),1);this.stack=undefined;this.pname=undefined;return}var matches=line.match(/^(\S+)\s/);if(matches&&matches.length){if(this.includePname)this.pname=matches[1];return}matches=line.match(/^\s*\w+\s*(.+) (\S+)/);if(matches&&matches.length){func=matches[1];if(/^\(/.test(func))return;this.unshiftStack(func);return}console.warn('Unrecognized line: "%s"',line)};proto.collapsedLines=function collapsedLines(){var collapsed=this.collapsed;return Object.keys(collapsed).sort(function(a,b){return a<b?-1:1}).map(function(k){return format("%s %s",k,collapsed[k])})}},{util:19}],4:[function(require,module,exports){"use strict";var format=require("util").format;function scalarReverse(s){return s.split("").reverse().join("")}function nameHash(name){var vector=0,weight=1,max=1,mod=10,ord;name=name.replace(/.(.*?)`/,"");var splits=name.split("");for(var i=0;i<splits.length;i++){ord=splits[i].charCodeAt(0)%mod;vector+=ord/(mod++-1)*weight;max+=weight;weight*=.7;if(mod>12)break}return 1-vector/max}function color(type,hash,name){var v1,v2,v3,r,g,b;if(!type)return"rgb(0, 0, 0)";if(hash){v1=nameHash(name);v2=v3=nameHash(scalarReverse(name))}else{v1=Math.random()+1;v2=Math.random()+1;v3=Math.random()+1}switch(type){case"hot":r=205+Math.round(50*v3);g=0+Math.round(230*v1);b=0+Math.round(55*v2);return format("rgb(%s, %s, %s)",r,g,b);case"mem":r=0;g=190+Math.round(50*v2);b=0+Math.round(210*v1);return format("rgb(%s, %s, %s)",r,g,b);case"io":r=80+Math.round(60*v1);g=r;b=190+Math.round(55*v2);return format("rgb(%s, %s, %s)",r,g,b);default:throw new Error("Unknown type "+type)}}module.exports=function colorMap(paletteMap,colorTheme,hash,func){if(paletteMap[func])return paletteMap[func];paletteMap[func]=color(colorTheme,hash,func);return paletteMap[func]}},{util:19}],5:[function(require,module,exports){"use strict";var xtend=require("xtend"),format=require("util").format,colorMap=require("./color-map");function inspect(obj,depth){console.error(require("util").inspect(obj,false,depth||5,true))}function oneDecimal(x){return Math.round(x*10)/10}function htmlEscape(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports=function contextify(parsed,opts){var time=parsed.time,timeMax=opts.timemax,ypadTop=opts.fontsize*4,ypadBottom=opts.fontsize*2+10,xpad=10,depthMax=0,frameHeight=opts.frameheight,paletteMap={};if(timeMax<time&&timeMax/time>.02){console.error("Specified timemax %d is less than actual total %d, so it will be ignored",timeMax,time);timeMax=Infinity}timeMax=Math.min(time,timeMax);var widthPerTime=(opts.imagewidth-2*xpad)/timeMax,minWidthTime=opts.minwidth/widthPerTime;function pruneNarrowBlocks(){function nonNarrowBlock(acc,k){var val=parsed.nodes[k];if(typeof val.stime!=="number")throw new Error("Missing start for "+k);if(val.etime-val.stime<minWidthTime)return acc;acc[k]=parsed.nodes[k];depthMax=Math.max(val.depth,depthMax);return acc}return Object.keys(parsed.nodes).reduce(nonNarrowBlock,{})}function processNode(node){var func=node.func,depth=node.depth,etime=node.etime,stime=node.stime,factor=opts.factor,countName=opts.countname,isRoot=!func.length&&depth===0;if(isRoot)etime=timeMax;var samples=Math.round((etime-stime*factor)*10)/10,samplesTxt=samples.toLocaleString(),pct,pctTxt,escapedFunc,name,sampleInfo;if(isRoot){name="all";sampleInfo=format("(%s %s, 100%)",samplesTxt,countName)}else{pct=Math.round(100*samples/(timeMax*factor)*10)/10;pctTxt=pct.toLocaleString();escapedFunc=htmlEscape(func);name=escapedFunc;sampleInfo=format("(%s %s), %s%%)",samplesTxt,countName,pctTxt)}var x1=oneDecimal(xpad+stime*widthPerTime),x2=oneDecimal(xpad+etime*widthPerTime),y1=oneDecimal(imageHeight-ypadBottom-(depth+1)*frameHeight+1),y2=oneDecimal(imageHeight-ypadBottom-depth*frameHeight),chars=(x2-x1)/(opts.fontsize*opts.fontwidth),showText=false,text,text_x,text_y;if(chars>=3){showText=true;text=func.slice(0,chars);if(chars<func.length)text=text.slice(0,chars-2)+"..";text=htmlEscape(text)}return{name:name,search:name.toLowerCase(),samples:sampleInfo,rect_x:x1,rect_y:y1,rect_w:x2-x1,rect_h:y2-y1,rect_fill:colorMap(paletteMap,opts.colors,opts.hash,func),showText:showText,text:text,text_x:x1+3,text_y:3+(y1+y2)/2}}var nodes=pruneNarrowBlocks();var imageHeight=depthMax*frameHeight+ypadTop+ypadBottom;var ctx=xtend(opts,{imageheight:imageHeight,xpad:xpad,titleX:opts.imagewidth/2,detailsY:imageHeight-frameHeight/2});ctx.nodes=Object.keys(nodes).reduce(function(acc,k){acc.push(processNode(nodes[k]));return acc},[]);return ctx}},{"./color-map":4,util:19,xtend:31}],6:[function(require,module,exports){"use strict";module.exports={fonttype:{type:"string",description:"Font Type"},fontsize:{type:"range",description:"Font Size",min:6,max:22,step:.1},imagewidth:{type:"range",description:"Image Width",min:200,max:2400,step:5},frameheight:{type:"range",description:"Frame Height",min:6,max:40,step:.1},fontwidth:{type:"range",description:"Font Width",min:.2,max:1,step:.05},minwidth:{type:"range",description:"Min Function Width",min:.1,max:30,step:.1},countname:{type:"string",description:"Count Name"},colors:{type:"string",description:"Color Theme"},bgcolor1:{type:"color",description:"Gradient start"},bgcolor2:{type:"color",description:"Gradient stop"},timemax:{type:"number",description:"Time Max"},factor:{type:"number",description:"Scaling Factor"},hash:{type:"boolean",description:"Color by Function Name"},titlestring:{type:"string",description:"Title"},nametype:{type:"string",description:"Name"},internals:{type:"checkbox",description:"Show Internals",checked:""},optimizationinfo:{type:"checkbox",description:"Show Optimization Info",checked:""}}},{}],7:[function(require,module,exports){"use strict";module.exports={fonttype:"Verdana",fontsize:12,imagewidth:1200,frameheight:16,fontwidth:.59,minwidth:.1,countname:"samples",colors:"hot",bgcolor1:"#eeeeee",bgcolor2:"#eeeeb0",timemax:Infinity,factor:1,hash:true,titletext:"Flame Graph",nametype:"Function:",palette:false,palette_map:{},pal_file:"palette.map",internals:false,optimizationinfo:false}},{}],8:[function(require,module,exports){"use strict";var instrumentsRegex=/^Running Time, *Self,.*, *Symbol Name/;var perfRegex=/^\w+ +\d+ +\d+\.\d+:/;function firstLine(arr){for(var i=0;i<arr.length;i++){if(arr[i]&&arr[i].length&&arr[i][0]!=="#")return arr[i]}}var go=module.exports=function(arr){var first=firstLine(arr);if(!first)return null;if(instrumentsRegex.test(first))return"instruments";if(perfRegex.test(first))return"perf";return null}},{}],9:[function(require,module,exports){"use strict";var v8Internals="__libc_start|node::Start\\("+"|v8::internal::|v8::Function::Call|v8::Function::NewInstance"+"|Builtin:|Stub:|StoreIC:|LoadIC:|LoadPolymorphicIC:|KeyedLoadIC:"+"|<Unknown Address>|_platform_\\w+\\$VARIANT\\$|DYLD-STUB\\$|_os_lock_spin_lock";var midHead="(",midTail=")[^;]+;",lastHead="(.+?);((?:",lastTail=")[^;]+?)( \\d+$)";var v8MidRegex=new RegExp(midHead+v8Internals+midTail,"g"),v8LastRegex=new RegExp(lastHead+v8Internals+lastTail);function filterLine(l){return l.replace(v8MidRegex,"").replace(v8LastRegex,function replaceInternals(match,before,remove,after){return before+after})}var go=module.exports=function filterInternals(collapsed){return collapsed.map(filterLine)}},{}],10:[function(require,module,exports){"use strict";var v8LazyCompileRegex=/LazyCompile:/g;var v8LazyCompileInlineInfoRegex=/LazyCompile:[~*]{0,1}/g;var go=module.exports=function filterLazyCompile(collapsed,opts){opts=opts||{};var v8LazyRegex=opts.optimizationinfo?v8LazyCompileRegex:v8LazyCompileInlineInfoRegex;var v8LazyReplacement=opts.optimizationinfo?"":"-";function filterLine(l){return l.replace(v8LazyRegex,v8LazyReplacement)}return collapsed.map(filterLine)}},{}],11:[function(require,module,exports){"use strict";var instruments=require("./collapse-instruments"),perf=require("./collapse-perf");function getCollapser(type){switch(type){case"instruments":return instruments();case"perf":return perf();default:throw new Error('Unknown type, cannot collapse "'+type+'"')}}exports=module.exports=function stackCollapse(type,arr){var collapser=getCollapser(type);function online(line){collapser.collapseLine(line)}function nonEmpty(line){return line&&line.length}arr.forEach(online);return collapser.collapsedLines().filter(nonEmpty)}},{"./collapse-instruments":2,"./collapse-perf":3}],12:[function(require,module,exports){"use strict";var regexp=/^(.*)\s+(\d+(?:\.\d*)?)$/;function lexically(a,b){return a<b?-1:b<a?1:0}function sort(functions){return functions.sort(lexically)}function flow(tmp,nodes,last,frames,time){var lenLast=last.length-1,lenFrames=frames.length-1,i,lenSame,k;for(i=0;i<=lenLast;i++){if(i>lenFrames)break;if(last[i]!==frames[i])break}lenSame=i;for(i=lenLast;i>=lenSame;i--){k=last[i]+";"+i;nodes[k+";"+time]={func:last[i],depth:i,etime:time,stime:tmp[k].stime};tmp[k]=null}for(i=lenSame;i<=lenFrames;i++){k=frames[i]+";"+i;tmp[k]={stime:time}}}function trimLine(line){return line.trim()}function nonempty(line){return line.length}module.exports=function parseInput(lines){var ignored=0,time=0,last=[],tmp={},nodes={};function processLine(line){var frames;var matches=line.match(regexp);if(!matches||!matches.length)return;var stack=matches[1];var samples=matches[2];if(!samples){ignored++;return}stack=stack.replace(/<>/g,"()");frames=stack.split(";");flow(tmp,nodes,last,frames,time);time+=parseInt(samples,10);last=frames}sort(lines.map(trimLine).filter(nonempty)).forEach(processLine);flow(tmp,nodes,last,[],time);if(ignored)console.error("Ignored %d lines with invalid format");if(!time)throw new Error("No stack counts found!");return{nodes:nodes,time:time,ignored:ignored}}},{}],13:[function(require,module,exports){"use strict";module.exports=require("./svg.hbs")},{"./svg.hbs":14}],14:[function(require,module,exports){var Handlebars=require("hbsfy/runtime");module.exports=Handlebars.template({1:function(depth0,helpers,partials,data,depths){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,buffer='<g class="func_g" onmouseover="s(\'';stack1=(helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"name",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+=" ";stack1=(helper=(helper=helpers.samples||(depth0!=null?depth0.samples:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"samples",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+='\')" onmouseout="c()" data-search="';stack1=(helper=(helper=helpers.search||(depth0!=null?depth0.search:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"search",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+='">\n<title>';stack1=(helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"name",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+=" ";stack1=(helper=(helper=helpers.samples||(depth0!=null?depth0.samples:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"samples",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+='</title>\n  <rect x="'+escapeExpression((helper=(helper=helpers.rect_x||(depth0!=null?depth0.rect_x:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_x",hash:{},data:data}):helper))+'" y="'+escapeExpression((helper=(helper=helpers.rect_y||(depth0!=null?depth0.rect_y:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_y",hash:{},data:data}):helper))+'" width="'+escapeExpression((helper=(helper=helpers.rect_w||(depth0!=null?depth0.rect_w:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_w",hash:{},data:data}):helper))+'" data-width="'+escapeExpression((helper=(helper=helpers.rect_w||(depth0!=null?depth0.rect_w:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_w",hash:{},data:data}):helper))+'" height="'+escapeExpression((helper=(helper=helpers.rect_h||(depth0!=null?depth0.rect_h:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_h",hash:{},data:data}):helper))+'" data-height="'+escapeExpression((helper=(helper=helpers.rect_h||(depth0!=null?depth0.rect_h:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_h",hash:{},data:data}):helper))+'" fill="'+escapeExpression((helper=(helper=helpers.rect_fill||(depth0!=null?depth0.rect_fill:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"rect_fill",hash:{},data:data}):helper))+'" rx="2" ry="2" />\n\n';stack1=helpers["if"].call(depth0,depth0!=null?depth0.showText:depth0,{name:"if",hash:{},fn:this.program(2,data,depths),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer+"\n</g>\n"},2:function(depth0,helpers,partials,data,depths){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,lambda=this.lambda,buffer='<text text-anchor="" x="'+escapeExpression((helper=(helper=helpers.text_x||(depth0!=null?depth0.text_x:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"text_x",hash:{},data:data}):helper))+'" y="'+escapeExpression((helper=(helper=helpers.text_y||(depth0!=null?depth0.text_y:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"text_y",hash:{},data:data}):helper))+'" font-size="'+escapeExpression(lambda(depths[2]!=null?depths[2].fontsize:depths[2],depth0))+'" font-family="'+escapeExpression(lambda(depths[2]!=null?depths[2].fonttype:depths[2],depth0))+'" fill="rgb(0,0,0)">';stack1=(helper=(helper=helpers.text||(depth0!=null?depth0.text:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"text",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}return buffer+"</text>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data,depths){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,buffer='<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" width="'+escapeExpression((helper=(helper=helpers.imagewidth||(depth0!=null?depth0.imagewidth:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imagewidth",hash:{},data:data}):helper))+'" height="'+escapeExpression((helper=(helper=helpers.imageheight||(depth0!=null?depth0.imageheight:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imageheight",hash:{},data:data}):helper))+'" onload="init(evt)" viewBox="0 0 '+escapeExpression((helper=(helper=helpers.imagewidth||(depth0!=null?depth0.imagewidth:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imagewidth",hash:{},data:data}):helper))+" "+escapeExpression((helper=(helper=helpers.imageheight||(depth0!=null?depth0.imageheight:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imageheight",hash:{},data:data}):helper))+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<defs>\n	<linearGradient id="background" y1="0" y2="1" x1="0" x2="0">\n    <stop stop-color="'+escapeExpression((helper=(helper=helpers.bgcolor1||(depth0!=null?depth0.bgcolor1:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"bgcolor1",hash:{},data:data}):helper))+'" offset="5%" />\n    <stop stop-color="'+escapeExpression((helper=(helper=helpers.bgcolor2||(depth0!=null?depth0.bgcolor2:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"bgcolor2",hash:{},data:data}):helper))+'" offset="95%" />\n	</linearGradient>\n</defs>\n<style type="text/css">\n	.func_g:hover { stroke:black; stroke-width:0.5; }\n</style>\n<script type="text/javascript">\n	var details;\n	function init(evt) { details = document.getElementById("details").firstChild; }\n  function s(info) { details.nodeValue = "'+escapeExpression((helper=(helper=helpers.nametype||(depth0!=null?depth0.nametype:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"nametype",hash:{},data:data}):helper))+': " + info; }\n	function c() { details.nodeValue = \' \'; }\n</script>\n\n<rect x="0.0" y="0" width="'+escapeExpression((helper=(helper=helpers.imagewidth||(depth0!=null?depth0.imagewidth:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imagewidth",hash:{},data:data}):helper))+'" height="'+escapeExpression((helper=(helper=helpers.imageheight||(depth0!=null?depth0.imageheight:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"imageheight",hash:{},data:data}):helper))+'" fill="url(#background)"  />\n<text text-anchor="middle" x="'+escapeExpression((helper=(helper=helpers.titleX||(depth0!=null?depth0.titleX:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"titleX",hash:{},data:data}):helper))+'" y="24" font-size="17" font-family="'+escapeExpression((helper=(helper=helpers.fonttype||(depth0!=null?depth0.fonttype:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"fonttype",hash:{},data:data}):helper))+'" fill="rgb(0,0,0)">';stack1=(helper=(helper=helpers.titletext||(depth0!=null?depth0.titletext:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"titletext",hash:{},data:data}):helper);if(stack1!=null){buffer+=stack1}buffer+='</text>\n<text text-anchor="left" x="'+escapeExpression((helper=(helper=helpers.xpad||(depth0!=null?depth0.xpad:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"xpad",hash:{},data:data}):helper))+'" y="'+escapeExpression((helper=(helper=helpers.detailsY||(depth0!=null?depth0.detailsY:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"detailsY",hash:{},data:data}):helper))+'" font-size="'+escapeExpression((helper=(helper=helpers.fontsize||(depth0!=null?depth0.fontsize:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"fontsize",hash:{},data:data}):helper))+'" font-family="'+escapeExpression((helper=(helper=helpers.fonttype||(depth0!=null?depth0.fonttype:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"fonttype",hash:{},data:data}):helper))+'" fill="rgb(0,0,0)" id="details"> </text>\n\n';stack1=helpers.each.call(depth0,depth0!=null?depth0.nodes:depth0,{name:"each",hash:{},fn:this.program(1,data,depths),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer+"\n</svg>\n"},useData:true,useDepths:true})},{"hbsfy/runtime":29}],15:[function(require,module,exports){"use strict";var xtend=require("xtend"),parseInput=require("./stackparse"),contextify=require("./contextify"),svgTemplate=require("./svg-template"),defaultOpts=require("./default-opts");var go=module.exports=function svg(collapsedLines,opts){opts=xtend(defaultOpts,opts);var parsed=parseInput(collapsedLines);var context=contextify(parsed,opts);return svgTemplate(context)}},{"./contextify":5,"./default-opts":7,"./stackparse":12,"./svg-template":13,xtend:31}],16:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],17:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canMutationObserver=typeof window!=="undefined"&&window.MutationObserver;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}var queue=[];if(canMutationObserver){var hiddenDiv=document.createElement("div");var observer=new MutationObserver(function(){var queueList=queue.slice();queue.length=0;queueList.forEach(function(fn){fn()})});observer.observe(hiddenDiv,{attributes:true});return function nextTick(fn){if(!queue.length){hiddenDiv.setAttribute("yes","no")}queue.push(fn)}}if(canPost){window.addEventListener("message",function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],18:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],19:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;
var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":18,_process:17,inherits:16}],20:[function(require,module,exports){var now=require("date-now");module.exports=function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;if(null==wait)wait=100;function later(){var last=now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}}return function debounced(){context=this;args=arguments;timestamp=now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}}},{"date-now":21}],21:[function(require,module,exports){module.exports=Date.now||now;function now(){return(new Date).getTime()}},{}],22:[function(require,module,exports){"use strict";var base=require("./handlebars/base");var SafeString=require("./handlebars/safe-string")["default"];var Exception=require("./handlebars/exception")["default"];var Utils=require("./handlebars/utils");var runtime=require("./handlebars/runtime");var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;Handlebars["default"]=Handlebars;exports["default"]=Handlebars},{"./handlebars/base":23,"./handlebars/exception":24,"./handlebars/runtime":25,"./handlebars/safe-string":26,"./handlebars/utils":27}],23:[function(require,module,exports){"use strict";var Utils=require("./utils");var Exception=require("./exception")["default"];var VERSION="2.0.0";exports.VERSION=VERSION;var COMPILER_REVISION=6;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};exports.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}exports.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn){if(toString.call(name)===objectType){if(fn){throw new Exception("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{this.helpers[name]=fn}},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{this.partials[name]=partial}},unregisterPartial:function(name){delete this.partials[name]}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1){return undefined}else{throw new Exception("Missing helper: '"+arguments[arguments.length-1].name+"'")}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name]}return instance.helpers.each(context,options)}else{return inverse(this)}}else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}});instance.registerHelper("each",function(context,options){if(!options){throw new Exception("Must pass iterator to #each")}var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var contextPath;if(options.data&&options.ids){contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+"."}if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===context.length-1;if(contextPath){data.contextPath=contextPath+i}}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0;if(contextPath){data.contextPath=contextPath+key}}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]);options={data:data}}return fn(context,options)}else{return options.inverse(this)}});instance.registerHelper("log",function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message)});instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,message){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,message)}}}};exports.logger=logger;var log=logger.log;exports.log=log;var createFrame=function(object){var frame=Utils.extend({},object);frame._parent=object;return frame};exports.createFrame=createFrame},{"./exception":24,"./utils":27}],24:[function(require,module,exports){"use strict";var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;exports["default"]=Exception},{}],25:[function(require,module,exports){"use strict";var Utils=require("./utils");var Exception=require("./exception")["default"];var COMPILER_REVISION=require("./base").COMPILER_REVISION;var REVISION_CHANGES=require("./base").REVISION_CHANGES;var createFrame=require("./base").createFrame;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}exports.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template")}if(!templateSpec||!templateSpec.main){throw new Exception("Unknown template object: "+typeof templateSpec)}env.VM.checkRevision(templateSpec.compiler);var invokePartialWrapper=function(partial,indent,name,context,hash,helpers,partials,data,depths){if(hash){context=Utils.extend({},context,hash)}var result=env.VM.invokePartial.call(this,partial,name,context,helpers,partials,data,depths);if(result==null&&env.compile){var options={helpers:helpers,partials:partials,data:data,depths:depths};partials[name]=env.compile(partial,{data:data!==undefined,compat:templateSpec.compat},env);result=partials[name](context,options)}if(result!=null){if(indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break}lines[i]=indent+lines[i]}result=lines.join("\n")}return result}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}};var container={lookup:function(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name]}}},lambda:function(current,context){return typeof current==="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){return templateSpec[i]},programs:[],program:function(i,data,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths){programWrapper=program(this,i,fn,data,depths)}else if(!programWrapper){programWrapper=this.programs[i]=program(this,i,fn)}return programWrapper},data:function(data,depth){while(data&&depth--){data=data._parent}return data},merge:function(param,common){var ret=param||common;if(param&&common&&param!==common){ret=Utils.extend({},common,param)}return ret},noop:env.VM.noop,compilerInfo:templateSpec.compiler};var ret=function(context,options){options=options||{};var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data)}var depths;if(templateSpec.useDepths){depths=options.depths?[context].concat(options.depths):[context]}return templateSpec.main.call(container,context,container.helpers,container.partials,data,depths)};ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials)}}else{container.helpers=options.helpers;container.partials=options.partials}};ret._child=function(i,data,depths){if(templateSpec.useDepths&&!depths){throw new Exception("must pass parent depths")}return program(container,i,templateSpec[i],data,depths)};return ret}exports.template=template;function program(container,i,fn,data,depths){var prog=function(context,options){options=options||{};return fn.call(container,context,container.helpers,container.partials,options.data||data,depths&&[context].concat(depths))};prog.program=i;prog.depth=depths?depths.length:0;return prog}exports.program=program;function invokePartial(partial,name,context,helpers,partials,data,depths){var options={partial:true,helpers:helpers,partials:partials,data:data,depths:depths};if(partial===undefined){throw new Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}exports.invokePartial=invokePartial;function noop(){return""}exports.noop=noop;function initData(context,data){if(!data||!("root"in data)){data=data?createFrame(data):{};data.root=context}return data}},{"./base":23,"./exception":24,"./utils":27}],26:[function(require,module,exports){"use strict";function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};exports["default"]=SafeString},{}],27:[function(require,module,exports){"use strict";var SafeString=require("./safe-string")["default"];var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key]}}}return obj}exports.extend=extend;var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(value){return typeof value==="function"};if(isFunction(/x/)){isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};exports.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString()}else if(string==null){return""}else if(!string){return string+""}string=""+string;if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}exports.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}exports.isEmpty=isEmpty;function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.appendContextPath=appendContextPath},{"./safe-string":26}],28:[function(require,module,exports){module.exports=require("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":22}],29:[function(require,module,exports){module.exports=require("handlebars/runtime")["default"]},{"handlebars/runtime":28}],30:[function(require,module,exports){"use strict";var hexAddressRegex=/0x((\d|[abcdefABCDEF]){0,2})+/;function byDecimalAddress(a,b){return a.decimalAddress<b.decimalAddress?-1:1}function processLine(acc,x){if(!x.trim().length)return acc;var parts=x.split(/ +/);if(parts.length<3)return acc;var decimal=parseInt(parts[0],16);var item={address:parts[0],size:parts[1],decimalAddress:decimal,symbol:parts.slice(2).join(" ")};acc.push(item);return acc}function JITResolver(map){if(!(this instanceof JITResolver))return new JITResolver(map);var lines=Array.isArray(map)?map:map.split("\n");this._addresses=lines.reduce(processLine,[]).sort(byDecimalAddress);this._len=this._addresses.length}module.exports=JITResolver;var proto=JITResolver.prototype;proto.resolve=function resolve(hexAddress){var match=null;var a=typeof hexAddress==="number"?hexAddress:parseInt(hexAddress,16);for(var i=0;i<this._len;i++){if(a<this._addresses[i].decimalAddress){match=this._addresses[i-1];break}}return match};function defaultGetHexAddress(line){var m=line.match(hexAddressRegex);return m&&m[0]}proto.resolveMulti=function resolveMulti(stack,getHexAddress){getHexAddress=getHexAddress||defaultGetHexAddress;var self=this;var isLines=Array.isArray(stack);var lines=isLines?stack:stack.split("\n");function processLine(line){var address=getHexAddress(line);if(!address)return line;var resolved=self.resolve(address);if(!resolved)return line;return line.replace(address,resolved.symbol)}var processedLines=lines.map(processLine);return isLines?processedLines:processedLines.join("\n")}},{}],31:[function(require,module,exports){module.exports=extend;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}}return target}},{}],32:[function(require,module,exports){"use strict";var debounce=require("debounce");var searchFieldEl=document.querySelector(".search.ui-part input[type=search]"),regexCheckEl=document.getElementById("search-regex"),blinkCheckEl=document.getElementById("search-blink"),searchErrorEl=document.getElementById("search-error");function tryMakeRegex(query){try{return new RegExp(query,"i")}catch(e){console.error(e);searchErrorEl.value=e.message}}function addMatchIndicator(el){el.classList.add("match");var rect=el.children[1];var w=rect.getAttribute("width");var h=rect.getAttribute("height");if(w<10){rect.setAttribute("width",10);rect.setAttribute("height",h/2)}}function removeMatchIndicator(el){el.classList.remove("match");var rect=el.children[1];rect.setAttribute("width",parseInt(rect.dataset.width));rect.setAttribute("height",parseInt(rect.dataset.height))}function addBlink(el){el.classList.add("blink")}function removeBlink(el){el.classList.remove("blink")}function clearMatches(){var matches=document.querySelectorAll("g.func_g.match");for(var i=0;i<matches.length;i++){removeMatchIndicator(matches.item(i))}}function clearBlinks(){var matches=document.querySelectorAll("g.func_g.blink");for(var i=0;i<matches.length;i++){removeBlink(matches.item(i))}}function clearError(){searchErrorEl.value=""}function indicateMatch(el,blink){addMatchIndicator(el);if(blink)addBlink(el)}function onQueryChange(){clearMatches();clearBlinks();clearError();var query=searchFieldEl.value.trim();var isregex=regexCheckEl.checked;var blink=blinkCheckEl.checked;if(!query.length)return;var regex;if(isregex){regex=tryMakeRegex(query);if(!regex)return}else{query=query.toLowerCase()}var func_gs=document.querySelectorAll("g.func_g");for(var i=0;i<func_gs.length;i++){var func_g=func_gs[i];if(isregex){if(regex.test(func_g.dataset.search))indicateMatch(func_g,blink)}else{if(~func_g.dataset.search.indexOf(query))indicateMatch(func_g,blink)}}}var go=module.exports=function initSearch(){searchFieldEl.addEventListener("input",debounce(onQueryChange,200));regexCheckEl.addEventListener("change",onQueryChange);blinkCheckEl.addEventListener("change",onQueryChange)};module.exports.refresh=onQueryChange},{debounce:20}],33:[function(require,module,exports){"use strict";var flamegraph=require("../"),jitResolver=require("resolve-jit-symbols"),initSearch=require("./init-search"),resolver;var optsTemplate=require("./opts-template.hbs");var flamegraphEl=document.getElementById("flamegraph");var callgraphFileEl=document.getElementById("callgraph-file");var mapFileEl=document.getElementById("map-file");var optionsEl=document.getElementById("options");var instructionsEl=document.getElementById("instructions");var excludeOptions=["fonttype","fontwidth","countname","colors","timemax","factor","hash","title","titlestring","nametype","bgcolor1","bgcolor2"];var usedMetaKeys=Object.keys(flamegraph.defaultOptsMeta).filter(function(k){return!~excludeOptions.indexOf(k)});var currentCallgraph;function renderOptions(){var opts=flamegraph.defaultOpts,meta=flamegraph.defaultOptsMeta;var context=usedMetaKeys.reduce(function(acc,k){var type=meta[k].type;return acc.concat({name:k,value:opts[k],type:type,description:meta[k].description,min:meta[k].min,max:meta[k].max,step:meta[k].step})},[]);var html=optsTemplate(context);optionsEl.innerHTML=html;usedMetaKeys.forEach(function(k){var val=opts[k];var el=document.getElementById(k);el.value=val})}function getOptions(){var meta=flamegraph.defaultOptsMeta;return usedMetaKeys.reduce(function(acc,k){var el=document.getElementById(k);var val=el.value;if(meta[k].type==="number"){val=val.length?parseFloat(val):Infinity}else if(meta[k].type==="boolean"){val=val.length?Boolean(val):false}else if(meta[k].type==="checkbox"){val=el.checked?true:false}acc[k]=val;return acc},flamegraph.defaultOpts)}function onOptionsChange(e){refresh()}function registerChange(){var inputs=optionsEl.getElementsByTagName("input"),i,el;for(i=0;i<inputs.length;i++){el=inputs[i];el.onchange=onOptionsChange}}function hookHoverMethods(){var details=document.getElementById("details").firstChild;window.s=function s(info){details.nodeValue="Function: "+info};window.c=function c(){details.nodeValue=" "}}function render(arr){if(instructionsEl.parentElement)instructionsEl.parentElement.removeChild(instructionsEl);var opts=getOptions();var svg;try{currentCallgraph=arr;svg=flamegraph(arr,opts);flamegraphEl.innerHTML=svg;hookHoverMethods()}catch(err){flamegraphEl.innerHTML='<br><p class="error">'+err.toString()+"</p>"}}function refresh(){if(!currentCallgraph)return;render(currentCallgraph);initSearch.refresh()}function readFile(file,cb){var fileReader=new FileReader;fileReader.readAsText(file,"utf-8");fileReader.onload=function onload(err){cb(err,fileReader.result)}}function onFile(e,process){var file=e.target.files[0];if(!file)return;readFile(file,process)}function processCallgraphFile(e){var arr=e.target.result.split("\n");if(resolver)arr=resolver.resolveMulti(arr);render(arr)}function processMapFile(e){var map=e.target.result;resolver=jitResolver(map);if(currentCallgraph)currentCallgraph=resolver.resolveMulti(currentCallgraph);refresh()}function onCallgraphFile(e){onFile(e,processCallgraphFile)}function onMapFile(e){onFile(e,processMapFile)}callgraphFileEl.addEventListener("change",onCallgraphFile);mapFileEl.addEventListener("change",onMapFile);renderOptions();registerChange();initSearch(flamegraphEl)},{"../":1,"./init-search":32,"./opts-template.hbs":34,"resolve-jit-symbols":30}],34:[function(require,module,exports){var Handlebars=require("hbsfy/runtime");module.exports=Handlebars.template({1:function(depth0,helpers,partials,data){var helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return'<div class="options-input">\n  <p>'+escapeExpression((helper=(helper=helpers.description||(depth0!=null?depth0.description:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"description",hash:{},data:data}):helper))+'</p>\n  <input type="'+escapeExpression((helper=(helper=helpers.type||(depth0!=null?depth0.type:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"type",hash:{},data:data}):helper))+'" name="'+escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+'" id="'+escapeExpression((helper=(helper=helpers.name||(depth0!=null?depth0.name:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"name",hash:{},data:data}):helper))+'" value"'+escapeExpression((helper=(helper=helpers.value||(depth0!=null?depth0.value:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"value",hash:{},data:data}):helper))+'" '+escapeExpression((helper=(helper=helpers.checked||(depth0!=null?depth0.checked:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"checked",hash:{},data:data}):helper))+' min="'+escapeExpression((helper=(helper=helpers.min||(depth0!=null?depth0.min:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"min",hash:{},data:data}):helper))+'" max="'+escapeExpression((helper=(helper=helpers.max||(depth0!=null?depth0.max:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"max",hash:{},data:data}):helper))+'" step="'+escapeExpression((helper=(helper=helpers.step||(depth0!=null?depth0.step:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"step",hash:{},data:data}):helper))+'">\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer="";stack1=helpers.each.call(depth0,depth0,{name:"each",hash:{},fn:this.program(1,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer},useData:true})},{"hbsfy/runtime":29}]},{},[33]);